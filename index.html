<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>trackr</title>
    <link rel="icon"  href="wwwroot/favicon.ico"/>
    <script src="wwwroot/lib/bootstrap/dist/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="wwwroot/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="wwwroot/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="wwwroot/lib/fontawesome/all.min.css" />
</head>
<body>
    <div style="padding:10px;height:60px;font-size:26px;position:sticky;top:0;z-index:5000;background-color:#2F3136;">
        <a href="https://github.com/jackfperryjr/trackr" target="_blank" title="View source code on GitHub!" style="text-decoration:none;color:#5865F2;"><i class="fas fa-chart-pie" style="color:#5865F2;"></i> trackr</a>
        <span style="margin-left:10px;float:right;font-size:16px;"><a class="btn btn-success" id="windows" href="https://github.com/jackfperryjr/strago/releases/download/v1.0.0/trackrSetup.exe" download><strong>Download for Windows!</strong></a></span>
        <span style="float:right;font-size:16px;"><a class="btn btn-success" id="mac" href="https://github.com/jackfperryjr/strago/releases/download/v1.0.0/trackrSetup.dmg" download><strong>Download for Mac!</strong></a></span>
    </div>
    <div class="text-center">
        <br>
        <h1><span style="color:#5865F2;">trackr</span> is a character experience tracking app for <a href="https://www.play.net/dr/" target="_blank" style="color:#5865F2;text-decoration:none;">DragonRealms</a></h1>
        <br>
        <span id="downloads" style="font-weight:bolder;font-size:18px;">0</span> <span style="font-weight:bolder;font-size:18px;">downloads!</span>
        <br>
        <div id="carousel" class="carousel slide" data-bs-ride="carousel" style="width:50%;margin:20px auto 0 auto;">
            <div class="carousel-indicators">
                <button type="button" data-bs-target="#carousel" data-bs-slide-to="0" class="active"></button>
                <button type="button" data-bs-target="#carousel" data-bs-slide-to="1"></button>
                <button type="button" data-bs-target="#carousel" data-bs-slide-to="2"></button>
                <button type="button" data-bs-target="#carousel" data-bs-slide-to="3"></button>
                <button type="button" data-bs-target="#carousel" data-bs-slide-to="4"></button>
            </div>
            <div class="carousel-inner" style="height:675px;">
                <div class="carousel-item active" style="height:70%;width:100%;">
                <img class="d-block w-100" src="Screenshots/main_page.png" alt="main_page" title="main">
                </div>
                <div class="carousel-item" style="height:70%;width:100%;">
                <img class="d-block w-100" src="Screenshots/all_page.png" alt="all_page" title="all graphs overlaid for each character">
                </div>
                <div class="carousel-item" style="height:70%;width:100%;">
                <img class="d-block w-100" src="Screenshots/character_page.png" alt="character_page" title="character graphs">
                </div>
                <div class="carousel-item" style="height:70%;width:100%;">
                <img class="d-block w-100" src="Screenshots/update_page.png" alt="update_page" title="update character">
                </div>
                <div class="carousel-item" style="height:70%;width:100%;">
                <img class="d-block w-100" src="Screenshots/add_page.png" alt="add_page" title="add character">
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon"></span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carousel" data-bs-slide="next">
                <span class="carousel-control-next-icon"></span>
            </button>
        </div>
    </div>
    <script src="wwwroot/lib/jquery/dist/jquery.min.js"></script>
    <script src="wwwroot/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript">
        document.addEventListener("DOMContentLoaded", function() {
            getDownloadCount()
        })
        function countDownload() {
            fetch('https://www.moogleapi.com/api/v1/blogs/like/108a2d59-2c4e-487d-b2a3-149ff433ced6', {
            method: 'put'
            }).then(function(response) {
                if (response.status === 200) {
                    getDownloadCount()
                }
            })
        }

        function getDownloadCount() {
            fetch('https://www.moogleapi.com/api/v1/blogs/108a2d59-2c4e-487d-b2a3-149ff433ced6', {
                method: 'get'
            }).then(function(response) {
                response.json().then(function(data) {
                    document.getElementById('downloads').innerHTML = data[0].like
                })
            })
        }

        document.getElementById('mac').addEventListener('click', function(e) {
            e.preventDefault();
            let href = this.getAttribute('href')
            let a = document.createElement('a')
            a.setAttribute('href', href)
            a.setAttribute('download', 'download') 
            document.body.appendChild(a)
            a.click()
            document.body.removeChild(a)
            delete a

            countDownload()
        })

        document.getElementById('windows').addEventListener('click', function(e) {
            e.preventDefault();
            let href = this.getAttribute('href')
            let a = document.createElement('a')
            a.setAttribute('href', href)
            a.setAttribute('download', 'download') 
            document.body.appendChild(a)
            a.click()
            document.body.removeChild(a)
            delete a

            countDownload()
        })
    </script>
    <footer class="text-muted" style="padding:20px;position:fixed;bottom:0;">
        &copy 2022 - trackr
    </footer>
</body>
</html>